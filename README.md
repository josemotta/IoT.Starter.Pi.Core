# IoT.Starter.Pi.Core

### IoT Starter Raspberry Pi Core

More details about [IoT Starter](https://github.com/josemotta/IoT.Starter "IoT Starter"), please see articles and repos below:

[IoT Starter Core for Netduino Plus 2](https://www.codeproject.com/Articles/1122233/IoT-Starter-Core-for-Netduino-Plus "IoT Starter Core for Netduino Plus 2")  
https://github.com/josemotta/IoT.Starter  
https://github.com/josemotta/IoT.Starter.Np2.Core  
https://github.com/josemotta/IoT.Starter.Np2.Thing  
https://github.com/josemotta/IoT.Home.Netduino  


At this project targeted to Raspberry Pi with Linux, the API First Design strategy is used to develop an ASP.NET Core Web Server automatically generated by Swagger Hub. The availability of Visual Studio running at a speedy x64 cpus with Windows 10 are the key advantages of this starter kit. Previous studies were done before this project, please see links below.

https://github.com/josemotta/pi-docker-gpio  
https://github.com/josemotta/IoT.Starter.Api  

## IoT API for Raspberry Pi

Starting from a Swagger API definition, an ASP.NET Core Web API is developed using SwaggerHub. The code is automatically generated and pushed to github. Then it is loaded by a Windows x64 machine and upgraded to ASP.NET Core 2.0, using Visual Studio 2017.

A multi-stage docker image build is accomplished at the speedy Windows x64 machine, generating code for the linux-arm. The same VS solution include separated projects for the web server and web UI. Both docker images are pushed to the cloud and then pulled back into a Raspberry Pi with Raspbian 9.1 stretch installed.

#### Modeling:
 
- API is designed at Swagger Hub   
- Web service stub is automatically generated
- Swaggerhub is configured to push code to 'swag' branch at Github 

#### Development at x64 with Windows 10:

- Install Docker

	**Web Service**

- Pull Swaggerhub generated code from github
- Upgrade to .NET Core 2 framework and Docker support
- Merge code from swag branch to master
- Create multi-stage docker build for web service    
- Compiles at x64 machine for linux-arm framework  
- Push Docker image to cloud: home-web  

	**Web UI**

- Generate another project based on default razor pages app
- Add multi-stage docker build for web ui  
- Push Docker image to cloud: home-ui   

#### Deployment at Raspberry Pi with Linux (hostname "rpi")

- Raspbian GNU/Linux 9.1 (stretch) 
- Install Docker  
- Run both Docker images for home-web and home-ui

#### Testing
 
- Go back to x64 machine
- Access home-web and home-ui via any browser  





